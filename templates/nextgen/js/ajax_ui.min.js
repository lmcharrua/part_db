var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};var BASE="";var AjaxUI=function(){function AjaxUI(){this._this=this;this.ajax_complete_listeners=[];this.start_listeners=[];this.trees_filled=false;this.xhrPool=[];this.statePopped=false;window.onpopstate=this.onPopState;$(document).ajaxError(this.onAjaxError.bind(this));$(document).ajaxComplete(this.onAjaxComplete.bind(this))}AjaxUI.getInstance=function(){if(AjaxUI.singleton==null||AjaxUI.singleton==undefined){AjaxUI.singleton=new AjaxUI}return AjaxUI.singleton};AjaxUI.prototype.start=function(){var page=window.location.pathname;BASE=getBasePath();var _this=this;$.ajaxSetup({beforeSend:function(jqXHR){_this.xhrPool.push(jqXHR)}});this.checkRedirect();this.tree_fill();this.registerForm();this.registerSubmitBtn();this.registerLinks();this.getTypeaheadData();for(var _i=0,_a=this.start_listeners;_i<_a.length;_i++){var entry=_a[_i];entry()}};AjaxUI.prototype.checkRedirect=function(){if($("input#redirect_url").val()!=null){var redirect_url=$("input#redirect_url").val().toString();if(redirect_url!=""){openLink(redirect_url)}}};AjaxUI.prototype.addAjaxCompleteAction=function(func){this.ajax_complete_listeners.push(func)};AjaxUI.prototype.addStartAction=function(func){this.start_listeners.push(func)};AjaxUI.prototype.showProgressBar=function(){$("#progressModal").modal({keyboard:false,backdrop:false,show:true})};AjaxUI.prototype.closeProgressBar=function(){$(".modal-backdrop").remove();$("body").removeClass("modal-open");$("body, .navbar").css("padding-right","")};AjaxUI.prototype.registerForm=function(){"use strict";var data={success:this.showFormResponse,beforeSubmit:this.showRequest,beforeSerialize:this.form_beforeSerialize};$("form").not(".no-ajax").ajaxForm(data)};AjaxUI.prototype.showFormResponse=function(responseText,statusText,xhr,$form){"use strict";$("#content").html($(responseText).find("#content-data").html()).show(0)};AjaxUI.prototype.form_beforeSerialize=function($form,options){$form.find("input[type=checkbox].tristate").each(function(index){var name=$(this).attr("name");var value=$(this).val();$form.append('<input type="hidden" name="'+name+'" value="'+value+'">')});$form.find("input[type=checkbox].tristate").remove();return true};AjaxUI.prototype.showRequest=function(formData,jqForm,options){"use strict";if(!$(jqForm).hasClass("no-progbar")){AjaxUI.getInstance().beforeAjaxSubmit()}return true};AjaxUI.prototype.registerSubmitBtn=function(){var _this=this;$("button.submit").unbind("click").click(function(){_this.submitFormSubmitBtn($(this).closest("form"),this)})};AjaxUI.prototype.submitForm=function(form){"use strict";var data={success:this.showFormResponse,beforeSubmit:this.showRequest};$(form).ajaxSubmit(data)};AjaxUI.prototype.submitFormSubmitBtn=function(form,btn){var name=$(btn).attr("name");var value=$(btn).attr("value");if(value===undefined)value="";$(form).append('<input type="hidden" name="'+name+'" value="'+value+'">');this.submitForm(form)};AjaxUI.prototype.registerLinks=function(){"use strict";var _this=this;$("a").not(".link-anchor, .link-collapse, .link-external, .tree-btns, .back-to-top, .link-datasheet").unbind("click").click(function(event){event.preventDefault();var a=$(this);if(a.attr("href")!=null){var href=addURLparam(a.attr("href"),"ajax");_this.abortAllAjax();_this.beforeAjaxSubmit();$("#content").load(href+" #content-data");_this.showProgressBar();return true}});$("a.link-anchor").unbind("click").click(function(event){event.preventDefault();scrollToAnchor($(this).prop("hash"))})};AjaxUI.prototype.onNodeSelected=function(event,data){"use strict";if(data.href.indexOf("github.com")!==-1||data.href.indexOf("phpdoc")!==-1){openInNewTab(data.href);$(this).treeview("toggleNodeSelected",data.nodeId)}else{AjaxUI.getInstance().abortAllAjax();AjaxUI.getInstance().showProgressBar();$("#content").load(addURLparam(data.href,"ajax")+" #content-data")}$(this).treeview("toggleNodeExpanded",data.nodeId);$("#sidebar-container").removeClass("show")};AjaxUI.prototype.onNodeContextmenu=function(event,data){"use strict";if(data.href!==""){openInNewTab(data.href)}};AjaxUI.prototype.tree_fill=function(){"use strict";var categories=Cookies.get("tree_datasource_tree-categories");var devices=Cookies.get("tree_datasource_tree-devices");var tools=Cookies.get("tree_datasource_tree-tools");if(typeof categories=="undefined"){categories="categories"}if(typeof devices=="undefined"){devices="devices"}if(typeof tools=="undefined"){tools="tools"}this.treeLoadDataSource("tree-categories",categories);this.treeLoadDataSource("tree-devices",devices);this.treeLoadDataSource("tree-tools",tools);this.trees_filled=true};AjaxUI.prototype.initTree=function(tree,url){var node_handler=this.onNodeSelected;var contextmenu_handler=this.onNodeContextmenu;$.getJSON(BASE+url,function(data){$(tree).treeview({data:data,enableLinks:false,showIcon:false,showBorder:true,onNodeSelected:node_handler,onNodeContextmenu:contextmenu_handler,expandIcon:"fas fa-plus fa-fw fa-treeview",collapseIcon:"fas fa-minus fa-fw fa-treeview"}).treeview("collapseAll",{silent:true})})};AjaxUI.prototype.treeLoadDataSource=function(target_id,datasource){var text=$(".tree-btns[data-mode='"+datasource+"']").html();text=text+" \n<span class='caret'></span>";switch(datasource){case"categories":ajaxui.initTree("#"+target_id,"api.php/1.0.0/tree/categories");$("#"+target_id+"-title").html(text);break;case"locations":ajaxui.initTree("#"+target_id,"api.php/1.0.0/tree/locations");$("#"+target_id+"-title").html(text);break;case"footprints":ajaxui.initTree("#"+target_id,"api.php/1.0.0/tree/footprints");$("#"+target_id+"-title").html(text);break;case"manufacturers":ajaxui.initTree("#"+target_id,"api.php/1.0.0/tree/manufacturers");$("#"+target_id+"-title").html(text);break;case"suppliers":ajaxui.initTree("#"+target_id,"api.php/1.0.0/tree/suppliers");$("#"+target_id+"-title").html(text);break;case"tools":ajaxui.initTree("#"+target_id,"api.php/1.0.0/tree/tools");$("#"+target_id+"-title").html(text);break;case"devices":ajaxui.initTree("#"+target_id,"api.php/1.0.0/tree/devices");$("#"+target_id+"-title").html(text);break}};AjaxUI.prototype.updateTrees=function(){this.tree_fill()};AjaxUI.prototype.getTypeaheadData=function(){var _this=this;$.getJSON("api.php/1.0.0/3d_models/files",function(data){_this.model_list=data;_this.fillTypeahead()});$.getJSON("api.php/1.0.0/img_files/files",function(data){_this.img_list=data;_this.fillTypeahead()})};AjaxUI.prototype.fillTypeahead=function(){if($("#models-search").length&&!$("#models-search").hasClass("initialized")){$("#models-search").addClass("initialized");$("#models-search").typeahead({source:this.model_list})}if($("#img-search").length&&!$("#img-search").hasClass("initialized")){$("#img-search").addClass("initialized");$("#img-search").typeahead({source:this.img_list})}};AjaxUI.prototype.abortAllAjax=function(){var _this=this;$(this.xhrPool).each(function(i,jqXHR){jqXHR.abort();_this.xhrPool.splice(i,1)})};AjaxUI.prototype.beforeAjaxSubmit=function(){this.showProgressBar()};AjaxUI.prototype.onAjaxError=function(event,request,settings){"use strict";if(request.statusText=="abort"){return}console.log(event);if(request.status==500&&request.responseText!==""){console.log("Response:"+request.responseText)}};AjaxUI.prototype.onPopState=function(event){var page=location.href;if(page.indexOf(".php")!==-1&&page.indexOf("index.php")===-1){AjaxUI.getInstance().statePopped=true;$("#content").load(addURLparam(location.href,"ajax")+" #content-data");this.showProgressBar()}};AjaxUI.prototype.onAjaxComplete=function(event,xhr,settings){var i=this.xhrPool.indexOf(xhr);if(i>-1)this.xhrPool.splice(i,1);var url=settings.url;if(url.indexOf("api.php")!=-1){return}this.closeProgressBar();this.registerForm();this.registerLinks();this.registerSubmitBtn();this.fillTypeahead();this.checkRedirect();for(var _i=0,_a=this.ajax_complete_listeners;_i<_a.length;_i++){var entry=_a[_i];entry()}if(settings.type.toLowerCase()!=="post"&&settings.dataType!=="json"&&settings.dataType!=="jsonp"){if(url.indexOf("#")!=-1){var hash=url.substring(url.indexOf("#"));scrollToAnchor(hash)}else{$("body,html").scrollTop(0)}var clean_url=settings.url.replace(/&ajax/g,"").replace(/\?ajax/g,"");if(this.statePopped==false){window.history.pushState(null,"",clean_url)}this.statePopped=false;$("#login-link").attr("href","login.php?redirect="+encodeURIComponent(url));var input=xhr.responseText;var title=extractTitle(input);if(title!==""){document.title=title}if(this.trees_filled){var selected=$("#tree-categories").treeview("getSelected")[0];if(typeof selected!=="undefined"&&settings.url.indexOf(selected.href)==-1){$("#tree-categories").treeview("unselectNode",[selected.nodeId,{silent:true}])}selected=$("#tree-devices").treeview("getSelected")[0];if(typeof selected!=="undefined"&&settings.url.indexOf(selected.href)==-1){$("#tree-devices").treeview("unselectNode",[selected.nodeId,{silent:true}])}selected=$("#tree-tools").treeview("getSelected")[0];if(typeof selected!=="undefined"&&settings.url.indexOf(selected.href)==-1){$("#tree-tools").treeview("unselectNode",[selected.nodeId,{silent:true}])}}}};return AjaxUI}();var ajaxui=AjaxUI.getInstance();$(function(event){ajaxui.addStartAction(addCollapsedClass);ajaxui.addStartAction(fixSelectPaginationHeight);ajaxui.addStartAction(treeviewBtnInit);ajaxui.addStartAction(registerJumpToTop);ajaxui.addStartAction(makeTooltips);ajaxui.addStartAction(fixCurrencyEdits);ajaxui.addStartAction(registerAutoRefresh);ajaxui.addStartAction(scrollUpForMsg);ajaxui.addStartAction(makeSortTable);ajaxui.addStartAction(rightClickSubmit);ajaxui.addStartAction(makeTriStateCheckbox);ajaxui.addStartAction(makeHighlight);ajaxui.addStartAction(viewer3d_models);ajaxui.addStartAction(makeGreekInput);ajaxui.addStartAction(makeCharts);ajaxui.addStartAction(makeHistoryCharts);ajaxui.addStartAction(setBootstrapSelectStyle);ajaxui.addStartAction(makeDateTimePickers);ajaxui.addAjaxCompleteAction(addCollapsedClass);ajaxui.addAjaxCompleteAction(fixSelectPaginationHeight);ajaxui.addAjaxCompleteAction(registerHoverImages);ajaxui.addAjaxCompleteAction(makeSortTable);ajaxui.addAjaxCompleteAction(makeFileInput);ajaxui.addAjaxCompleteAction(makeTooltips);ajaxui.addAjaxCompleteAction(registerX3DOM);ajaxui.addAjaxCompleteAction(registerBootstrapSelect);ajaxui.addAjaxCompleteAction(fixCurrencyEdits);ajaxui.addAjaxCompleteAction(registerAutoRefresh);ajaxui.addAjaxCompleteAction(scrollUpForMsg);ajaxui.addAjaxCompleteAction(rightClickSubmit);ajaxui.addAjaxCompleteAction(makeTriStateCheckbox);ajaxui.addAjaxCompleteAction(makeHighlight);ajaxui.addAjaxCompleteAction(viewer3d_models);ajaxui.addAjaxCompleteAction(makeGreekInput);ajaxui.addAjaxCompleteAction(makeCharts);ajaxui.addAjaxCompleteAction(makeHistoryCharts);ajaxui.addAjaxCompleteAction(makeDateTimePickers);ajaxui.start()});function makeDateTimePickers(){$(".datetime").each(function(){$(this).datetimepicker({useCurrent:false,icons:{time:"fas fa-clock fa-lg",clear:"fas fa-trash-alt fa-lg",today:"fa fa-calendar-check fa-lg"},format:"YYYY-MM-DD hh:mm:ss",buttons:{showToday:true},defaultDate:$(this).data("default-date")})});$("#datetimepicker_from").on("change.datetimepicker",function(e){$("#datetimepicker_to").datetimepicker("minDate",e.date)});$("#datetimepicker_to").on("change.datetimepicker",function(e){$("#datetimepicker_from").datetimepicker("maxDate",e.date)})}function setBootstrapSelectStyle(){$.fn.selectpicker.Constructor.DEFAULTS.style="bg-white border"}function makeCharts(){$(".chart").each(function(index,element){var data=$(element).data("data");var type=$(element).data("type");var ctx=element.getContext("2d");var myChart=new Chart(ctx,{type:type,data:data,options:{scales:{yAxes:[{ticks:{beginAtZero:true}}]}}})})}function makeHistoryCharts(){$(".historychart").each(function(index,element){var data=$(element).data("data");var type=$(element).data("type");var myChart=new Chart(element,{type:type,data:data,options:{scales:{yAxes:[{ticks:{beginAtZero:true}}],xAxes:[{type:"time",distribution:"series",bounds:"auto",time:{minUnit:"day"}}]},tooltips:{callbacks:{afterTitle:function(tooltipItems,data){return data.datasets[tooltipItems[0].datasetIndex].data[tooltipItems[0].index].type},afterLabel:function(tooltipItem,data){return data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index].difference},footer:function(tooltipItems,data){return data.datasets[tooltipItems[0].datasetIndex].data[tooltipItems[0].index].message},afterFooter:function(tooltipItems,data){return data.datasets[tooltipItems[0].datasetIndex].data[tooltipItems[0].index].user_name}},footerFontStyle:"normal"}}})})}function makeGreekInput(){$("input[type=text], textarea, input[type=search]").unbind("keydown").keydown(function(event){var greek=event.altKey;var greek_char="";if(greek){switch(event.key){case"w":greek_char="Ω";break;case"u":case"m":greek_char="µ";break;case"p":greek_char="φ";break;case"a":greek_char="α";break;case"b":greek_char="β";break;case"c":greek_char="γ";break;case"d":greek_char="δ";break;case"l":greek_char="£";break;case"y":greek_char="¥";break;case"o":greek_char="¤";break;case"1":greek_char="∑";break;case"2":greek_char="∫";break;case"3":greek_char="≤";break;case"4":greek_char="≥";break;case"5":greek_char="π";break;case"q":greek_char="©";break;case"e":greek_char="€";break}if(greek_char=="")return;var $txt=$(this);var caretPos=$txt[0].selectionStart;var textAreaTxt=$txt.val();$txt.val(textAreaTxt.substring(0,caretPos)+greek_char+textAreaTxt.substring(caretPos))}});this.greek_once=true}function makeTypeAhead(){if($("#models-search").length&&!$("#models-search").hasClass("initialized")){$("#models-search").addClass("initialized");$.getJSON("api.php/1.0.0/3d_models/files",function(data){$("#models-search").typeahead({source:data})})}}function makeTriStateCheckbox(){$(".tristate").tristate({checked:"true",unchecked:"false",indeterminate:"indeterminate"})}function registerHoverImages(){"use strict";$("img[rel=popover]").popover({html:true,trigger:"hover",placement:"auto",container:"body",content:function(){return'<img class="img-fluid" src="'+this.src+'" />'}})}function makeSortTable(){"use strict";var table=$($.fn.dataTable.tables()).DataTable();table.fixedHeader.adjust();$(".export-helper").each(function(index){var input=$(this).siblings("input");var that=this;$(this).text(input.val().toString())});$.extend(true,$.fn.DataTable.Buttons.defaults,{dom:{container:{className:"dt-buttons btn-group float-right"},button:{className:"btn btn-light btn-xs border"},collection:{tag:"ul",className:"dt-button-collection dropdown-menu",button:{tag:"li",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"a",className:""}}}});var exportFooter=function(){return"Generated by Part-DB on "+(new Date).toLocaleString()};var exportTitle=function(){if($("#export-title").length){return $("#export-title").text()}return"*"};var exportMessageTop=function(){if($("#export-messageTop").length){return $("#export-messageTop").text()}return"*"};if(!$.fn.DataTable.isDataTable(".table-sortable")){var table_1=$(".table-sortable").DataTable({paging:false,ordering:true,info:false,fixedHeader:{header:$(window).width()>=768,headerOffset:$("#navbar").height()},searching:false,select:$(".table-sortable").hasClass("table-selectable")?{style:"os",selector:"td:not(.no-select)"}:false,order:[],buttons:$(".table-sortable").hasClass("table-export")?[{extend:"copyHtml5",text:'<i class="fas fa-copy fa-fw"></i>',titleAttr:"Copy",exportOptions:{columns:":not(.no-export)"}},{extend:"excelHtml5",text:'<i class="fas fa-file-excel fa-fw"></i>',titleAttr:"Excel",exportOptions:{columns:":not(.no-export)"},messageBottom:exportFooter,messageTop:exportMessageTop,title:exportTitle},{extend:"csvHtml5",text:'<i class="fas fa-file-alt fa-fw"></i>',titleAttr:"CSV",exportOptions:{columns:":not(.no-export)"}},{extend:"pdfHtml5",text:'<i class="fas fa-file-pdf fa-fw"></i>',titleAttr:"PDF",exportOptions:{columns:":not(.no-export)"},messageBottom:exportFooter,messageTop:exportMessageTop,title:exportTitle,customize:function(doc){doc.defaultStyle.fontSize=9;doc.styles.tableHeader.fontSize=9}},{extend:"print",text:'<i class="fas fa-print fa-fw"></i>',titleAttr:"Print",exportOptions:{columns:":not(.no-export)"},messageBottom:exportFooter,messageTop:exportMessageTop,title:exportTitle}]:null,columnDefs:[{targets:[1],type:"natural-nohtml"},{targets:"no-sort",orderable:false}]});if($("#auto_sort").val()==true){table_1.columns(".order-default").order("asc").draw()}table_1.on("select deselect",function(e,dt,type,indexes){var data=table_1.rows({selected:true});var count=data.count();var tmp=[];if(count>0){$(".select_actions").show(0);$(".selected_n").text(count);for(var _i=0,_a=data[0];_i<_a.length;_i++){var n=_a[_i];tmp.push($(data.row(n).node()).find("input").val())}}else{$(".select_actions").hide(0)}var str=tmp.join();$("input[name='selected_ids']").val(str)});for(var n=0;n<table_1.context.length;n++){var my_panel_header=$(table_1.table(n).container()).closest(".card").find(".card-header");table_1.table(n).buttons().container().appendTo(my_panel_header)}}}function makeFileInput(){"use strict";$(".file").fileinput()}function registerJumpToTop(){$(window).scroll(function(){if($(this).scrollTop()>50){$("#back-to-top").fadeIn()}else{$("#back-to-top").fadeOut()}});$("#back-to-top").click(function(){$("#back-to-top").tooltip("hide");$("body,html").animate({scrollTop:0},800);return false}).tooltip()}function rightClickSubmit(){var _ajaxui=AjaxUI.getInstance();$("button.rightclick").off("contextmenu").contextmenu(function(event){event.preventDefault();var form=$(this).closest("form");form.append('<input type="hidden" name="rightclicked" value="true">');_ajaxui.submitFormSubmitBtn(form,this);return false})}function treeviewBtnInit(){$(".tree-btns").click(function(event){event.preventDefault();$(this).parents("div.dropdown").removeClass("show");$(".dropdown-menu.show").removeClass("show");var mode=$(this).data("mode");var target=$(this).data("target");var text=$(this).text()+" \n<span class='caret'></span>";if(mode==="collapse"){$("#"+target).treeview("collapseAll",{silent:true})}else if(mode==="expand"){$("#"+target).treeview("expandAll",{silent:true})}else{Cookies.set("tree_datasource_"+target,mode);ajaxui.treeLoadDataSource(target,mode)}return false})}function registerX3DOM(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){if($("x3d").length){try{x3dom.reload()}catch(e){}}return[2]})})}function registerBootstrapSelect(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){$(".selectpicker").selectpicker();return[2]})})}function addCollapsedClass(){$("div.collapse.card-collapse").siblings("div.card-header").children('a[data-toggle="collapse"]').addClass("collapsed")}function fixCurrencyEdits(){var inputs=$("input[type=number]").each(function(index,element){var e=$(element);if(e.val()==""&&e.prop("defaultValue").indexOf(",")!==-1){var newval=e.prop("defaultValue").replace(",",".");e.val(newval)}})}function registerAutoRefresh(){var val=$("#autorefresh").val();if(val>0){window.setTimeout(reloadPage,val)}}function fixSelectPaginationHeight(){if(parseInt($(".page-item").css("height"))!=0){$(".pagination>li>select").css("height",parseInt($(".page-item").css("height")))}}$("#search-submit").click(function(event){$("#searchbar").removeClass("show")});function livesearch(event,object,threshold){if(event.key=="Enter"){return}var $obj=$(object);var q=$obj.val();var form=$obj.closest("form");form.addClass("no-progbar");var xhr=form.data("jqxhr");if(typeof xhr!=="undefined"){xhr.abort()}if(q.length>=threshold){submitForm(form)}else{if(event.key=="Backspace"){openLink(BASE+"show_search_parts.php?hint")}}form.removeClass("no-progbar")}function makeHighlight(){var highlight=$("#highlight").val();if(typeof highlight!=="undefined"&&highlight!=""){$("table").highlight(highlight,{element:"span"})}}function makeTooltips(){$(".tooltip").remove();$("a[title]").tooltip("hide").tooltip({container:"body",placement:"auto",boundary:"window"});$("button[title]").tooltip("hide").tooltip({container:"body",placement:"auto",boundary:"window"})}function viewer3d_models(){if(!$("#models-picker").length)return;var dir="";function update(){var name=$("#models-picker").val();if(dir=="")return;var path="models/"+dir+"/"+name;$("#foot3d-model").attr("url",path);$("#foot3d-model2").attr("url",path);$("#path").text(path)}$("#models-picker").change(update);function node_handler(event,data){dir=data.href;$.getJSON("api.php/1.0.0/3d_models/files/"+dir,function(list){$("#models-picker").empty();list.forEach(function(element){$("<option><option/>").val(element).text(element).appendTo("#models-picker");$("#models-picker").selectpicker("refresh");update()})})}$.getJSON("api.php/1.0.0/3d_models/dir_tree",function(tree){$("#tree-footprint").treeview({data:tree,enableLinks:false,showIcon:false,showBorder:true,onNodeSelected:node_handler}).treeview("collapseAll",{silent:true})});$("#models-search-go").click(function(){var name=$("#models-search").val();var path="models/"+name;$("#foot3d-model").attr("url",path);$("#foot3d-model2").attr("url",path);$("#path").text(path)})}$(window).resize(function(){var height=$("#navbar").height()+10;$("body").css("padding-top",height);$("#fixed-sidebar").css("top",height)});$(window).on("load",function(){var height=$("#navbar").height()+10;$("body").css("padding-top",height);$("#fixed-sidebar").css("top",height)});